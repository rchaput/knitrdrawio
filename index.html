<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Provides a new engine for knitr that exports draw.io diagrams
    into images and includes them in the RMarkdown document automatically.">
<title>Drawio Engine for Knitr • knitrdrawio</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Drawio Engine for Knitr">
<meta property="og:description" content="Provides a new engine for knitr that exports draw.io diagrams
    into images and includes them in the RMarkdown document automatically.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">knitrdrawio</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="articles/knitrdrawio.html">Get started</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/headless.html">Using headless environments (Docker)</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/rchaput/knitrdrawio/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="drawio-engine-for-knitr">Drawio engine for Knitr<a class="anchor" aria-label="anchor" href="#drawio-engine-for-knitr"></a>
</h1></div>
<blockquote><p>Author: rchaput &lt;rchaput.pro@gmail.com&gt;</p></blockquote>
<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>This package adds a <code>drawio</code> engine to <a href="https://yihui.org/knitr/" class="external-link">knitr</a>, which can be used to automatically export <a href="https://diagrams.net/" class="external-link">draw.io</a> diagrams into images from code chunks in RMarkdown documents.</p>
</div>
<div class="section level2">
<h2 id="preview">Preview<a class="anchor" aria-label="anchor" href="#preview"></a>
</h2>
<div class="figure">
<img src="reference/figures/preview.png" alt=""><p class="caption">Preview of the code chunk (in Rmd) and the PDF result</p>
</div>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>This package is only available on GitHub, you will therefore need to install <code>remotes</code> first:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install the remotes package to install packages directly from GitHub</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="co"># Now, install the knitrdrawio package from GitHub</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"rchaput/knitrdrawio"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, you can also use <code>devtools</code>:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"rchaput/knitrdrawio"</span><span class="op">)</span></span></code></pre></div>
<p>Note that this package requires the <code>knitr</code> package (which you should already have if you are writing Rmd documents).</p>
<p>It also requires to have installed on your system the <code>draw.io</code> binary.</p>
<div class="section level3">
<h3 id="on-docker-ci-etc">On Docker (CI, etc.)<a class="anchor" aria-label="anchor" href="#on-docker-ci-etc"></a>
</h3>
<p>Draw.io requires a slightly different setup on headless environments (without a graphical server), such as Docker containers and in particular Continuous Integration workflows.</p>
<p>The following 2 points are important in such cases:</p>
<ul>
<li><p>The <code>xvfb-run</code> binary must be available on the system. On most Linux distributions, it can be obtained by installing the <code>xvfb</code> package through the distribution’s package manager (apt, rpm, …). <em>Note: <code>xvfb-run</code> provides the virtual graphical server that is required for <code>draw.io</code> to function. <strong>knitrdrawio</strong> will automatically encapsulate calls to <code>draw.io</code> if a headless environment is detected and <code>xvfb-run</code> is present. Alternatively, one can set the <code>$DISPLAY</code> environment variable to a (virtual) graphical server.</em></p></li>
<li><p>It is strongly recommended to install <code>draw.io</code> <a href="https://github.com/jgraph/drawio-desktop/releases/tag/v16.0.0" class="external-link">16.0.0</a>. <em>Note: more recent versions of <code>draw.io</code> ship Electron 16.x, which seems to have a problem with D-Bus, making <code>draw.io</code> crash on headless environments.</em></p></li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>First, load the package in some code chunk, preferably at the beginning of your Rmd document:</p>
<pre><code>```{r setup, include=FALSE}
library(knitr)
library(knitrdrawio)
```</code></pre>
<p>After that, you can use <a href="https://diagrams.net/" class="external-link">draw.io</a> diagrams in your Rmd document by using code chunks with the <code>drawio</code> engine:</p>
<pre><code>```{drawio my-super-diag1, src="path/to/my-diag.drawio"}
```</code></pre>
<p>Note that the <code>code</code> part of the chunk is empty (there is nothing after the header). You can customize the export process by using the chunk options. In the previous example, only the <code>src</code> option was specified: it is a mandatory option that sets the source diagram to export.</p>
<p>When the document is processed by <a href="https://yihui.org/knitr/" class="external-link">knitr</a>, the code chunk will be replaced by the resulting image.</p>
</div>
<div class="section level2">
<h2 id="chunk-options">Chunk options<a class="anchor" aria-label="anchor" href="#chunk-options"></a>
</h2>
<p>Several chunk options are available to help you export the diagram exactly as you want.</p>
<div class="section level3">
<h3 id="drawio-specific-options">Drawio-specific options<a class="anchor" aria-label="anchor" href="#drawio-specific-options"></a>
</h3>
<p>The following options are directly based on the <a href="https://diagrams.net/" class="external-link">draw.io</a> available options (which you can get by using <code>draw.io --help</code> from a command-line interface):</p>
<table class="table">
<colgroup>
<col width="6%">
<col width="9%">
<col width="41%">
<col width="41%">
</colgroup>
<thead><tr class="header">
<th>Chunk option</th>
<th>draw.io equivalent</th>
<th>Description</th>
<th>Default value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>src</td>
<td>[input file]</td>
<td>Path to the diagram to export</td>
<td>(Mandatory argument)</td>
</tr>
<tr class="even">
<td>format</td>
<td>-f –format</td>
<td>Export format to use. Possible values are: pdf, png, jpg, svg, vsdx, xml</td>
<td>Depends on the document output format latex =&gt; pdf html =&gt; svg other =&gt; png</td>
</tr>
<tr class="odd">
<td>crop</td>
<td>–crop</td>
<td>Crop resulting image to diagram size</td>
<td>TRUE</td>
</tr>
<tr class="even">
<td>transparent</td>
<td>-t –transparent</td>
<td>Set transparent background for PNG</td>
<td>FALSE</td>
</tr>
<tr class="odd">
<td>border</td>
<td>-b –border</td>
<td>Set border width around diagram</td>
<td>0</td>
</tr>
<tr class="even">
<td>page.index</td>
<td>-p –page-index</td>
<td>Select a specific page</td>
<td>output format is an image =&gt; 1st page is selected otherwise =&gt; all pages are exported</td>
</tr>
<tr class="odd">
<td>page.range</td>
<td>-g –page-range</td>
<td>Similar to page.index, but selecting a range instead. For PDF only. Usage: “from..to”</td>
<td>NULL</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="basic-knitr-options">Basic Knitr options<a class="anchor" aria-label="anchor" href="#basic-knitr-options"></a>
</h3>
<p>Some of the options defined in <a href="https://yihui.org/knitr/" class="external-link">knitr</a> can also be used, below is a list of a few important ones. A full list can be found in the <a href="https://yihui.org/knitr/options/" class="external-link">documentation</a> ; however, not all of them have been tested with <code>knitrdrawio</code>.</p>
<ul>
<li>
<code>label</code>: A meaningful value should be given to this option, as it is used to name the resulting image. By default, <a href="https://yihui.org/knitr/" class="external-link">knitr</a> will set a label if not specified, but it might be harder to identify. Note that <a href="https://yihui.org/knitr/" class="external-link">knitr</a> allows to skip the <code>label=</code> part for this specific option, so in our examples you will only see <code>{drawio &lt;label&gt;}</code>.</li>
<li>
<code>engine.path</code>: By default, this package will try to find the <code>draw.io</code> executable in a sane default location, depending on your OS, but if the executable cannot be found, you can set this option to override it. Alternatively, you can set this option at a global level:</li>
</ul>
<pre><code>```{r setup}
knitr::opts_chunks$set(engine.path = list(
    drawio = "/path/to/your/draw.io"
))
```</code></pre>
<ul>
<li>
<code>engine.opts</code>: You can manually set additional command-line arguments that will be given to <code>draw.io</code>. Although most of the <code>draw.io</code> arguments should be handled by our engine’s options, this is useful if one of your use cases is not covered.</li>
<li>
<code>eval</code>: Set to <code>FALSE</code> to completely disable this chunk. Nothing will be executed, and the diagram will not be exported.</li>
<li>
<code>include</code>: Set to <code>FALSE</code> to only disable the inclusion of the result in the Rmd document. The chunk will still be executed, and the diagram exported as an image in your file system, but it will not appear in the document. This is useful if you want to automatically export diagrams, but manually include the images.</li>
<li>
<code>cache</code>: Set to <code>TRUE</code> to cache the chunk execution. The chunk will not be re-executed as long as the chunk options and the diagram source file’s checksum stay the same.</li>
<li>
<code>fig.path</code>: A prefix for the path to which the resulting image is written. Useful for, e.g., writing all figures to a <code>figure/</code> directory. Non-existing directories are created.</li>
</ul>
</div>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/rchaput/knitrdrawio/" class="external-link">Browse source code</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing knitrdrawio</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>remy chaput <br><small class="roles"> Maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by remy chaput.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
